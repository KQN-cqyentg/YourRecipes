<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="./assets/css/style.css" />
  </head>
  <body>
    <div class="container">
      <!-- Thanh Navbar -->
      <div class="header">
        <div class="one">
          <h1 class="logo">
            <img src="./assets/img/recetas.png" alt="logo" /><b>Your Recipes</b>
          </h1>
          <div class="OurUser">
            <button class="btnProfile">
              <a href="./admin.html">ðŸ‘¤ Profile</a>
            </button>
            <p class="email_admin"></p>
            <button class="btnLogout">Log out</button>

            <button class="btnLogin"><a href="./login.html">Log in</a></button>
            <!-- <button class="btnRegister">
              <a href="./register.html">Register</a>
            </button> -->
          </div>
        </div>
        <div class="pages">
          <button class="page pHome"><a href="./index.html">Home</a></button>
          <button class="page pDishes">
            <a href="./list_dishes.html">List of dishes</a>
          </button>
          <button class="page pAbout"><a href="./about_contact.html">About & Contact</a></button>
          <button class="page btnManage"><a href="./manage.html">My Blog</a></button>
        </div>
      </div>
      <!-- /Thanh Navbar -->

      <div class="container_body">
        <!-- Popular Dishes -->
        <div class="pop-dish">
          <span class="pop-d"><b>Popular Recipe</b></span>
          <div class="dishes">
            <!-- <div class="dish">
              <img
                src="./assets/img/ðŸ¥—ðŸ¥“ Green Bean Salad with Bacon, Pecans, Cranberries & Feta ðŸ§„ðŸ¯__Looking for a salad thatâ€™s anything but boring_ This Green Bean Salad is loaded with crispy bacon, crunchy pecans, sweet cranberries, and creamy f. ðŸ¥¬âœ¨"
                alt="d1"
              />
              <div class="letter">
                <a href="">Green Bean Salad with Almonds & Feta</a> <br />
                <span class="date">December 18, 2017</span>
              </div>
            </div> -->
          </div>
          <div class="loadmore">
            <button class="loadmore">
              <a href="./list_dishes.html">LOAD MORE RECIPES?</a>
            </button>
          </div>
        </div>
        <!-- /Popular Dishes -->
      </div>

      <!-- ChÃ¢n trang -->
      <div class="footer">
        <div class="footer_1">
          <div>
            <h1 class="logo">
              <img src="./assets/img/recetas.png" alt="logo" /><b
                >Your Recipes</b
              >
            </h1>
          </div>

          <div class="part navigate">
            <span>Navigate</span>
            <div class="part_children">
              <a href="./index.html">Home</a> <br />
              <a href="./list_dishes.html">List of dishes</a> <br />
              <a href="./about.html">About</a>
            </div>
          </div>
        </div>

        <div class="web_address">
          Â© 2025 <a href="./index.html">YourRecipes</a> - Find your favourite
          recipes by KieuQuynhNgan.
        </div>
      </div>
      <!-- /ChÃ¢n trang -->
    </div>

    <script type="module">
      let eleDishes = document.querySelector(".dishes");

      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
      import {
        collection,
        getDocs,
        getFirestore,
      } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";
      import {
        getAuth,
        onAuthStateChanged,
        signOut,
      } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";
      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries

      // Your web app's Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyDl8yPDCfPIn_LLrXPRqa1BXvQXIA54_-I",
        authDomain: "jsi36-644e1.firebaseapp.com",
        projectId: "jsi36-644e1",
        storageBucket: "jsi36-644e1.firebasestorage.app",
        messagingSenderId: "156685119367",
        appId: "1:156685119367:web:d379c9de457e28ee806d22",
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);
      const db = getFirestore(app);

      let currentUser = null;
      let selectedFile = null;
      let currentAvatarUrl = null;

      //Kiá»ƒm tra Ä‘Äƒng nháº­p
      let btnProfile = document.querySelector(".btnProfile");
      let email_admin = document.querySelector(".email_admin");
      let btn_Logout = document.querySelector(".btnLogout");
      let btn_Login = document.querySelector(".btnLogin");
      let btnManage = document.querySelector(".btnManage")

      onAuthStateChanged(auth, (user) => {
        if (user) {
          btnManage.classList.remove("hidden")
          btnProfile.classList.remove("hidden");
          btn_Logout.classList.remove("hidden");
          btn_Login.classList.add("hidden");
          currentUser = user;
          email_admin.textContent = user.email;
          loadRooms();
        } else {
          btnManage.classList.add("hidden")
          btnProfile.classList.add("hidden");
          email_admin.textContent = "";
          btn_Logout.classList.add("hidden");
          btn_Login.classList.remove("hidden");
        }
      });
      // ÄÄƒng xuáº¥t
      btn_Logout.addEventListener("click", async () => {
        await signOut(auth);
        btnManage.classList.add("hidden")
        btnProfile.classList.add("hidden");
        email_admin.textContent = "";
        btn_Logout.classList.add("hidden");
        btn_Login.classList.remove("hidden");
      });
      //<div class="OurUser">
      //      <button class="btnProfile hidden">
      //        <a href="./admin.html">ðŸ‘¤ Admin</a>
      //      </button>
      //      <p class="email_admin"></p>
      //      <button class="btnLogout hidden">Log out</button>
      //      <button class="btnLogin"><a href="./login.html">Log in</a></button>
      //    </div>

      // Hiá»ƒn thá»‹ dá»¯ liá»‡u cÃ¡c mÃ³n Äƒn
      const querySnapshot = await getDocs(collection(db, "FoodRecipes"));
      querySnapshot.forEach((doc) => {
        console.log(doc.data());

        eleDishes.innerHTML += `
        <div class="dish">
              <img src="${doc.data().img}" alt="" />
              <div class="letter">
                <a href="./list_dishes.html">${doc.data().title}</a> <br />
                <span class="date">${doc.data().createdAt}</span>
              </div>
            </div>
        `;
      });
    </script>
    <!-- <script>
      let eleDishes = document.querySelector(".dishes");

      const url_api =
        "https://jsa44.nextgentra.com/api/nganposts?populate[image][populate]=*";
      const api_key =
        "a77380280a76ea2811b475dbbcea8aeee3862a3ecb75ca0333a232116b093b2124cc0ca47b8befd91d03cf70e66940c1b8c75239f083dd96b54a2f937102928c6be43096d0d6f041d0d39d0950f7ab4e2009514eceaa70e6ff0e974c16a77d2bdf1a31b657fd74d022ad28815283bdbbe2c0dcb556c3a79ee5b4ec26b6a16d53";
      fetch(url_api, {
        method: "GET",
        headers: {
          "Content-Type": "application/json",
          Authorization: `Bearer ${api_key}`,
        },
      })
        .then((res) => res.json())
        .then((resp) => {
          console.log(resp);
          console.log(eleDishes);

          for (let i = 0; i < resp.data.length; i++) {
            console.log(resp.data[i]);

            eleDishes.innerHTML += `
            <div class="dish">
              <img src="https://jsa44.nextgentra.com${resp.data[i].image.url}" alt="" />
              <div class="letter">
                <a href="./list_dishes.html">${resp.data[i].title}</a> <br />
                <span class="date">${resp.data[i].content}</span>
              </div>
            </div>
            `;
          }
        });
    </script> -->
  </body>
</html>
