<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="./assets/css/style_log.css" />
  </head>
  <body>
    <div class="container">
      <div class="form">
        <form action="">
          <h2>Login</h2>

          <input type="email" id="username" placeholder="Email" />

          <input type="password" id="password" placeholder="Password" />

          <button type="button" class="btnLogin">Log in</button>

          <p>Don't have an account yet? <a href="./register.html">Register</a></p>
        </form>
      </div>
    </div>

    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
      import {
        getAuth,
        signInWithEmailAndPassword,
      } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";
      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries

      // Your web app's Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyDl8yPDCfPIn_LLrXPRqa1BXvQXIA54_-I",
        authDomain: "jsi36-644e1.firebaseapp.com",
        projectId: "jsi36-644e1",
        storageBucket: "jsi36-644e1.firebasestorage.app",
        messagingSenderId: "156685119367",
        appId: "1:156685119367:web:d379c9de457e28ee806d22",
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);

      const getauth = getAuth(app);

      let valueBtn = document.querySelector(".btnLogin");
      function handleLogin() {
        let valueUser = document.querySelector("#username").value;
        let valuePass = document.querySelector("#password").value;

        console.log(valueUser);
        console.log(valuePass);
        signInWithEmailAndPassword(getauth, valueUser, valuePass)
          .then((item) => {
            console.log(item);
            alert("Đăng nhập thành công!");
            window.location.href = "index.html";
          })
          .catch((err) => {
            console.log(err.message);
            alert(err.message)
          });
      }

      valueBtn.addEventListener("click", handleLogin);
    </script>
  </body>
</html>
